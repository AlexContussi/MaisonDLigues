{% extends 'base.html.twig' %}
{% import "macro/macroFormule.html.twig" as macroFormule %}

{% block body %}
<style>
.gridAteliers{
    display:grid;
    grid-template-columns: repeat(3,1fr);
    padding: 2% 10%;
}
.selectedAtelier .card-header{background-color: #b8d8be;}
.selectedAtelier .card-body{background-color: #d2e7d6;}
.selectedAtelier{background-color: #d2e7d6;}
.dateReservation{}
.input-group-prepend{width: 130px;min-width: 130px;}
</style>
<input id="inputAtelier" name="idAtelier" value="" hidden />
<h2>Etape 1</h2>

<div class="gridAteliers">
    {% for atelier in ateliersData %}
        <div class="card text-dark mb-3"  idAtelierSelected="{{atelier.id}}"style="max-width: 18rem;">
            <div class="card-header">{{atelier.libelle}} </div>
            <div class="card-body">
                <h5 class="card-title"></h5>
                <p class="card-text">
                    {% for themes in atelier.themes %}
                        - {{themes.libelle}}</br>
                    {% endfor %}
                </p>
            </div>
        </div>
    {% endfor %}
</div>

<input name="idFormule" value="" hidden />
<div class='divFormule'>
    <h2>Etape 2 </h2>
    {{ macroFormule.macroFormule(formulesData) }}
</div>

<div class="datesCongres" name="datesCongres" style="padding-left: 10%;display: block ruby;padding-right: 14%;">
    <div>
        <h2>Etape 3</h2>
    </div>
    <div class="input-group mb-3" style="width: 50%;">
        <div class="input-group-prepend">
            <span class="input-group-text" id="labelDate1">Date de début</span>
        </div>
        <input class="form-control" type="date" name="dateReservation" min="2013-09-14" max="2013-09-15"/>
    </div>
    <div class="input-group mb-3" style="width: 50%;">
        <div class="input-group-prepend">
            <span class="input-group-text" id="labelDate2">Date de fin</span>
        </div>
        <input class="form-control" type="date" name="dateReservation"  min="2013-09-14" max="2013-09-15"/>
    </div>
    <button class="btn btn-success btnSubmitFormReserverAterlier">Réserver</button>
</div>

 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
 <script>
    $('.divFormule').hide();
    $('.datesCongres').hide();
    $('.card').click(function(){
        $('.card').removeClass('selectedAtelier');
        $(this).addClass('selectedAtelier');   
        $('#inputAtelier').val($(this).attr('idAtelierSelected'));
        console.log($('#inputAtelier').val());
        $('.divFormule').show();
    });

    $('.categorie').click(function(){
        $('.datesCongres').show();
        $('.noSelected').removeClass('selectedAtelier');
        $(this).parent('div').parent('fieldset').parent('div').parent('div').parent('div').addClass('selectedAtelier');   
    });

    $('.btnSubmitFormReserverAterlier').click(function(){
        if (confirm('Valider la réservation ?')) {
            $.ajax(
                method: "POST",
                url: "some.php",
                data: { name: "John", location: "Boston" },
                success: function (result) {
                    console.log(result);
                }

           )
    });




</script>




{% endblock %}
